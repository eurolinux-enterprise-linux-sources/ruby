Index: ChangeLog
===================================================================
--- ChangeLog	(revision 35715)
+++ ChangeLog	(revision 35716)
@@ -49,6 +49,14 @@
 	* error.c (name_err_to_s): we need not infect msg.
 
 	* test/ruby/test_exception.rb (TestException#test_exception_to_s_should_not_propagate_untrustedness): test for it.
+
+Sat May 19 14:42:20 2012  Tanaka Akira  <akr@fsij.org>
+
+	* lib/drb/ssl.rb: generate 1024 bits RSA key instead of 512 bits.
+	  OpenSSL 1.0.1 rejects 512 bits RSA key for TLS1.2 with SHA512.
+	  http://rt.openssl.org/Ticket/Display.html?id=2769&user=guest&pass=guest
+	  reported by Bohuslav Kabrda.
+	  [ruby-core:43844] [ruby-trunk - Bug #6221]
 
 Fri Mar  2 11:44:33 2012  Nobuyoshi Nakada  <nobu@ruby-lang.org>
 
Index: lib/drb/ssl.rb
===================================================================
--- lib/drb/ssl.rb	(revision 35715)
+++ lib/drb/ssl.rb	(revision 35716)
@@ -54,7 +54,7 @@
           return
         end
 
-	rsa = OpenSSL::PKey::RSA.new(512){|p, n|
+	rsa = OpenSSL::PKey::RSA.new(1024){|p, n|
 	  next unless self[:verbose]
 	  case p
 	  when 0; $stderr.putc "."  # BN_generate_prime
